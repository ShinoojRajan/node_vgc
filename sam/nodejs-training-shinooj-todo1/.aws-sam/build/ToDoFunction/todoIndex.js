"use strict";var a=Object.defineProperty;var g=Object.getOwnPropertyDescriptor;var c=Object.getOwnPropertyNames;var l=Object.prototype.hasOwnProperty;var P=(r,o)=>{for(var t in o)a(r,t,{get:o[t],enumerable:!0})},b=(r,o,t,s)=>{if(o&&typeof o=="object"||typeof o=="function")for(let e of c(o))!l.call(r,e)&&e!==t&&a(r,e,{get:()=>o[e],enumerable:!(s=g(o,e))||s.enumerable});return r};var h=r=>b(a({},"__esModule",{value:!0}),r);var S={};P(S,{main:()=>O});module.exports=h(S);var d=[];function n(){return d}function i(r){let o={id:d.length>0?d[d.length-1].id+1:1,note:r};return d.push(o),o}function u(r,o){let t=d.find(s=>s.id===r);return t?(t.note=o,t):null}function y(r){let o=d.findIndex(t=>t.id===r);return o!==-1?(d.splice(o,1),!0):!1}var m=async r=>{try{let o=r.body?JSON.parse(r.body):{};if(!o.note)return{statusCode:400,body:JSON.stringify({message:"Missing note in request body"})};let t=i(o.note);return{statusCode:201,body:JSON.stringify(t)}}catch(o){return{statusCode:500,body:JSON.stringify({message:"Internal server error",error:o.message})}}};var f=async()=>{try{let r=n();return{statusCode:200,body:JSON.stringify(r)}}catch(r){return{statusCode:500,body:JSON.stringify({message:"Internal server error",error:r.message})}}};var p=async r=>{try{let o=r.pathParameters&&r.pathParameters.id?parseInt(r.pathParameters.id,10):null,t=r.body?JSON.parse(r.body):{};if(!o||!t.note)return{statusCode:400,body:JSON.stringify({message:"Missing id or note in request"})};let s=u(o,t.note);return s?{statusCode:200,body:JSON.stringify(s)}:{statusCode:404,body:JSON.stringify({message:"Todo not found"})}}catch(o){return{statusCode:500,body:JSON.stringify({message:"Internal server error",error:o.message})}}};var T=async r=>{try{let o=r.pathParameters&&r.pathParameters.id?parseInt(r.pathParameters.id,10):null;return o?y(o)?{statusCode:204,body:""}:{statusCode:404,body:JSON.stringify({message:"Todo not found"})}:{statusCode:400,body:JSON.stringify({message:"Missing id in request"})}}catch(o){return{statusCode:500,body:JSON.stringify({message:"Internal server error",error:o.message})}}};function I(r){let{httpMethod:o,path:t}=r;return o==="POST"&&t==="/todos"?"POST /todos":o==="GET"&&t==="/todos"?"GET /todos":o==="PUT"&&/^\/todos\/[\w-]+$/.test(t)?"PUT /todos/{id}":o==="DELETE"&&/^\/todos\/[\w-]+$/.test(t)?"DELETE /todos/{id}":o==="POST"&&t==="/todos/backup"?"POST /todos/backup":""}var O=async(r,o,t)=>{let s=I(r),e;switch(s){case"POST /todos":e=await m(r,o,t);break;case"GET /todos":e=await f(r,o,t);break;case"PUT /todos/{id}":e=await p(r,o,t);break;case"DELETE /todos/{id}":e=await T(r,o,t);break;default:e={statusCode:404,body:JSON.stringify({message:"Not Found"})}}return e||{statusCode:200,body:""}};0&&(module.exports={main});
//# sourceMappingURL=todoIndex.js.map
